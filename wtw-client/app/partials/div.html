<div id="controls" ng-init="menuOpacity = 0" ng-mouseleave="menuOpacity = 0">

  <img id="controls-button" src="./img/blue-cog.png" ng-mouseenter="menuOpacity = 1">
  
  <div id="controls-menu" style="opacity: {{menuOpacity}};">
  
    <label>Show temperatures:</label>
    <input type="checkbox" ng-model="showTemps">
    <br>
    
    <label>Show forecast times:</label>
    <span ng-repeat="freq in forecastFreqs" ng-if="freq >= availableForecastFreq">
      <input type="radio" ng-model="$parent.$parent.forecastFreq" value="{{freq}}">Every {{freq}} hr
    </span>
    <br>
    
    <button ng-click="onEarlier()">Earlier</button>
    <button ng-click="onLater()">Later</button>
    <button ng-click="onLess()">Less</button>
    <button ng-click="onMore()">More</button>
    <br>
    
    <label>Show ahead times:</label>
    <span ng-repeat="freq in aheadFreqs">
      <input type="radio" ng-model="$parent.aheadFreq" value="{{freq}}">Every {{freq}} hr
    </span>
  
  </div>

</div>

<div id="forecast-table">
  <div ng-repeat="(rowIndex, aheadIndex) in ['day-row', 'time-row'].concat(aheadIndices)" ng-switch on="aheadIndex" class="animate">
  
    <div ng-switch-when="day-row">
      <div ng-repeat="(colIndex, day) in ['ahead-column'].concat(forecastDays) track by day.name" ng-style="getLayoutStyle({ col: day.previousForecastCount + 1, row: rowIndex, colspan: day.forecastCount });" class="day-cell animate">
        <div ng-if="day.name" class="vertical-center day">
          {{day.name}}
        </div>
      </div>
    </div>
    
    <div ng-switch-when="time-row">
      <div ng-repeat="(colIndex, forecastIndex) in ['ahead-column'].concat(forecastIndices)" ng-style="getLayoutStyle({ col: colIndex, row: rowIndex });" class="time-cell animate">
        <div class="vertical-center time">
          {{forecastTimes[forecastIndex] | date: 'ha'}}
        </div>
      </div>
    </div>
    
    <div ng-switch-default>
      <div ng-repeat="(colIndex, forecastIndex) in ['ahead-column'].concat(forecastIndices)" ng-init="forecast = forecasts[forecastIndex][aheadIndex]" ng-switch on="forecastIndex" class="animate">
      
        <div ng-switch-when="ahead-column" ng-style="getLayoutStyle({ col: colIndex, row: rowIndex });" class="ahead-cell animate">
          <div ng-if="aheadIndex === 0" class="vertical-center ahead">Actual</div>
          <div ng-if="aheadIndex !== 0" class="vertical-center ahead">{{aheadTimes[aheadIndex]}}hr</div>
        </div>
        
        <div ng-switch-default ng-style="getLayoutStyle({ col: colIndex, row: rowIndex });" class="forecast-cell animate">
          <div ng-if="forecast.query_time" class="vertical-center forecast">
            <div class="{{forecast.weather_icon_name}}"></div>
            <div ng-if="showTemps" style="margin-top: -15%;">{{forecast.temp}}&deg;C</div>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>